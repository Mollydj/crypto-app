import { createEndUserEvmAccount as u } from "@coinbase/cdp-api-client";
import { Analytics as i } from "./index.web2.js";
import "./index.web3.js";
import { toAuthStateUser as m } from "./index.web43.js";
import { InternalError as A } from "./index.web32.js";
import { validateUserAuthState as d } from "./index.web53.js";
import { getCoreAuthManager as h, getConfig as f } from "./index.web49.js";
async function U() {
  i.sendActionCallEvent({ name: "create_evm_eoa_account" });
  const t = h(), { user: e, authState: a } = d(
    t.getUser(),
    t.getAuthState()
  ), n = await u(f().projectId, e.userId, {
    walletSecretId: await t.getWalletSecretId()
  }), r = m(n);
  await t.setAuthState({
    ...a,
    user: r
  });
  const c = new Set(e.evmAccounts || []), o = r.evmAccounts?.find((s) => !c.has(s));
  if (!o)
    throw new A(
      "EVM EOA account was not created. Check the network log for more details."
    );
  return o;
}
export {
  U as createEvmEoaAccount
};

import { recordMfaEnrollmentPrompted as m } from "@coinbase/cdp-api-client";
import { Analytics as s } from "./index.native2.js";
import "./index.native3.js";
import { withAuth as l } from "./index.native43.js";
import { validateUserAuthState as d } from "./index.native51.js";
import { getConfig as o, getCoreAuthManager as p } from "./index.native37.js";
const g = async () => {
  if (s.sendActionCallEvent({ name: "record_mfa_enrollment_prompted" }), o().useMock)
    return {
      enrollmentPromptedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
  const t = p(), { user: e, authState: n } = d(
    t.getUser(),
    t.getAuthState()
  ), r = await l({}, t, async ({ user: a }) => m(o().projectId, a.userId));
  return await t.setAuthState({
    ...n,
    user: {
      ...e,
      mfaMethods: {
        enrollmentPromptedAt: r.enrollmentPromptedAt,
        ...e.mfaMethods
      }
    }
  }), r;
};
export {
  g as recordMfaEnrollmentPrompted
};

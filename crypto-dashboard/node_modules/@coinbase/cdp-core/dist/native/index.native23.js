import { createEndUserSolanaAccount as u } from "@coinbase/cdp-api-client";
import { Analytics as i } from "./index.native2.js";
import "./index.native3.js";
import { toAuthStateUser as l } from "./index.native42.js";
import { InternalError as m } from "./index.native33.js";
import { validateUserAuthState as A } from "./index.native51.js";
import { getCoreAuthManager as d, getConfig as h } from "./index.native37.js";
async function C() {
  i.sendActionCallEvent({ name: "create_solana_account" });
  const t = d(), { user: e, authState: r } = A(
    t.getUser(),
    t.getAuthState()
  ), n = await u(h().projectId, e.userId, {
    walletSecretId: await t.getWalletSecretId()
  }), a = l(n);
  await t.setAuthState({
    ...r,
    user: a
  });
  const c = new Set(e.solanaAccounts || []), o = a.solanaAccounts?.find(
    (s) => !c.has(s)
  );
  if (!o)
    throw new m(
      "Solana account was not created. Check the network log for more details."
    );
  return o;
}
export {
  C as createSolanaAccount
};

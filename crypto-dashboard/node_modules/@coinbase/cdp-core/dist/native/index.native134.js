import { hashMessage as n } from "viem";
import { signEvmHash as s } from "./index.native10.js";
import { validateUserOwnsAddress as a, EIP1193ProviderError as i, STANDARD_ERROR_CODES as c } from "./index.native35.js";
async function u(r) {
  const [o, t] = r;
  await a(t);
  try {
    const { signature: e } = await s({ evmAccount: t, hash: d(o) });
    return e;
  } catch (e) {
    throw new i(
      c.provider.userRejectedRequest,
      e instanceof Error ? e.message : "Signing failed"
    );
  }
}
function d(r) {
  return typeof r == "string" ? n({ raw: r }) : n(r);
}
export {
  u as handlePersonalSign
};

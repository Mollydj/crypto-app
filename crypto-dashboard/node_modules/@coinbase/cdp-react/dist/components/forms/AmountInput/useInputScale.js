import { useCallback as W, useEffect as m } from "react";
const x = ({
  minScale: c = 0.1,
  containerRef: r,
  measureRef: o,
  inputRef: i,
  scaleWrapperRef: l,
  valueRef: u
}) => {
  const n = W(() => {
    const t = r.current, e = i.current, a = o.current, d = u.current, s = l.current;
    if (!t || !a || !d || !e || !s)
      return;
    const h = a.clientWidth, b = t.clientWidth;
    if (e.style.width = `${d.clientWidth}px`, h > b) {
      const p = b / h;
      s.style.transform = `scale(${Math.max(p, c)})`;
    } else
      s.style.transform = "scale(1)";
  }, [c, r, o, u, i, l]);
  return m(() => {
    const t = r.current;
    if (!t)
      return;
    const e = new ResizeObserver(n);
    return e.observe(t), () => {
      e.disconnect();
    };
  }, [r, n]), {
    updateScale: n
  };
};
export {
  x as useInputScale
};

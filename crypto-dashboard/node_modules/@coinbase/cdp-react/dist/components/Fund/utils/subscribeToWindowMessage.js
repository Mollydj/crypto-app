const a = ["https://pay.coinbase.com", "https://pay-sandbox.coinbase.com"];
function d({
  onMessage: e,
  allowedOrigin: s = a,
  onValidateOrigin: i = () => Promise.resolve(!0)
}) {
  const o = (n) => {
    if (!c({ event: n, allowedOrigin: s }))
      return;
    const { eventName: t, data: r } = JSON.parse(n.data);
    t === "event" && (async () => await i(n.origin) && e(r))();
  };
  return window.addEventListener("message", o), () => {
    window.removeEventListener("message", o);
  };
}
const c = ({
  event: e,
  allowedOrigin: s
}) => !s || (typeof s == "string" ? e.origin === s : s.includes(e.origin));
export {
  a as DEFAULT_ONRAMP_URL,
  d as subscribeToWindowMessage
};

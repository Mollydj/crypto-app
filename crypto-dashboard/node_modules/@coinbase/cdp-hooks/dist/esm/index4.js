import { jsx as h } from "react/jsx-runtime";
import { onOAuthStateChange as m, initialize as P, onAuthStateChange as d } from "@coinbase/cdp-core";
import { createContext as f, useState as s, useEffect as x, useMemo as S, useContext as A } from "react";
const a = f(null);
function I({ children: t, config: e }) {
  const [n, c] = s(null), [r, i] = s(!1), [u, l] = s(null);
  x(() => {
    i(!1), (async () => {
      await P(e), d((o) => {
        c(o);
      }), i(!0);
    })(), m((o) => {
      l(o);
    });
  }, [e]);
  const C = S(
    () => ({
      isInitialized: r,
      currentUser: n,
      isSignedIn: !!n,
      config: e,
      oauthState: u
    }),
    [n, r, e, u]
  );
  return /* @__PURE__ */ h(a.Provider, { value: C, children: t });
}
function y() {
  const t = A(a);
  if (!t)
    throw new Error("useCDP must be used within a CDPHooksProvider");
  return t;
}
export {
  a as CDPContext,
  I as CDPHooksProvider,
  y as useCDP
};

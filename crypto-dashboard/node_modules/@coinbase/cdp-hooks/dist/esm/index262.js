import { LruMap as u } from "./index204.js";
const t = /* @__PURE__ */ new u(8192);
function s(r, { enabled: o = !0, id: e }) {
  if (!o || !e)
    return r();
  if (t.get(e))
    return t.get(e);
  const n = r().finally(() => t.delete(e));
  return t.set(e, n), n;
}
export {
  t as promiseCache,
  s as withDedupe
};
